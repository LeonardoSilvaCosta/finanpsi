(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[965],{8286:(e,s,a)=>{Promise.resolve().then(a.bind(a,8314))},8314:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var l=a(7437),t=a(2265);function d(){let[e,s]=(0,t.useState)([]),[a,d]=(0,t.useState)(!0),[r,n]=(0,t.useState)(null),[o,c]=(0,t.useState)({search:"",profession:"",dateFrom:"",dateTo:""});async function i(){try{d(!0);let e=new URLSearchParams;o.search&&e.append("search",o.search),o.profession&&e.append("profession",o.profession),o.dateFrom&&e.append("dateFrom",o.dateFrom),o.dateTo&&e.append("dateTo",o.dateTo);let a=await fetch("/api/admin/leads?".concat(e.toString()));if(!a.ok)throw Error("Erro ao carregar leads");let l=await a.json();s(l.leads||[]),n(null)}catch(e){n(e.message),console.error("Erro ao carregar leads:",e)}finally{d(!1)}}(0,t.useEffect)(()=>{i()},[o]);let m=Array.from(new Set(e.map(e=>e.profession).filter(Boolean)));return(0,l.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Leads"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Gerencie e visualize todos os leads cadastrados"})]}),(0,l.jsxs)("div",{className:"bg-card border rounded-lg p-6 mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Filtros"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Buscar"}),(0,l.jsx)("input",{type:"text",value:o.search,onChange:e=>c({...o,search:e.target.value}),placeholder:"Nome ou email...",className:"w-full px-4 py-2 border rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Profiss\xe3o"}),(0,l.jsxs)("select",{value:o.profession,onChange:e=>c({...o,profession:e.target.value}),className:"w-full px-4 py-2 border rounded-md",children:[(0,l.jsx)("option",{value:"",children:"Todas"}),m.map(e=>(0,l.jsx)("option",{value:e||"",children:e},e))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Data Inicial"}),(0,l.jsx)("input",{type:"date",value:o.dateFrom,onChange:e=>c({...o,dateFrom:e.target.value}),className:"w-full px-4 py-2 border rounded-md"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Data Final"}),(0,l.jsx)("input",{type:"date",value:o.dateTo,onChange:e=>c({...o,dateTo:e.target.value}),className:"w-full px-4 py-2 border rounded-md"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,l.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:e.length}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total de Leads"})]}),(0,l.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>e.groupAccepted).length}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Interessados em Grupo"})]}),(0,l.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>e.diagnosis).length}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Com Diagn\xf3stico"})]}),(0,l.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:m.length}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Profiss\xf5es \xdanicas"})]})]}),a?(0,l.jsx)("div",{className:"text-center py-12",children:(0,l.jsx)("p",{className:"text-muted-foreground",children:"Carregando leads..."})}):r?(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,l.jsx)("p",{className:"text-red-600",children:r})}):0===e.length?(0,l.jsx)("div",{className:"text-center py-12",children:(0,l.jsx)("p",{className:"text-muted-foreground",children:"Nenhum lead encontrado"})}):(0,l.jsx)("div",{className:"bg-card border rounded-lg overflow-hidden",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"bg-muted",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Nome"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Email"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Telefone"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Profiss\xe3o"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Grupo"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Data"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"A\xe7\xf5es"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"px-4 py-3",children:e.name}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsx)("a",{href:"mailto:".concat(e.email),className:"text-primary hover:underline",children:e.email})}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.phone||"-"}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.profession||"-"}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.groupAccepted?(0,l.jsx)("span",{className:"text-green-600",children:"âœ“ Sim"}):(0,l.jsx)("span",{className:"text-muted-foreground",children:"N\xe3o"})}),(0,l.jsx)("td",{className:"px-4 py-3",children:new Date(e.createdAt).toLocaleDateString("pt-BR")}),(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsx)("button",{onClick:()=>{alert("Desafio: ".concat(e.challenge||"N/A","\n\nDiagn\xf3stico: ").concat(e.diagnosis?e.diagnosis.substring(0,100)+"...":"N/A"))},className:"text-primary hover:underline text-sm",children:"Ver detalhes"})})]},e.id))})]})})})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[130,215,744],()=>s(8286)),_N_E=e.O()}]);