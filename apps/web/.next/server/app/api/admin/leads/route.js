(()=>{var e={};e.id=213,e.ids=[213],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3663:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>c,serverHooks:()=>m,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>p});var a=r(2412),n=r(4293),o=r(4147),i=r(7856),d=r(1326);async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("search"),s=t.get("profession"),a=t.get("dateFrom"),n=t.get("dateTo"),o={};r&&(o.OR=[{name:{contains:r,mode:"insensitive"}},{email:{contains:r,mode:"insensitive"}}]),s&&(o.profession={contains:s,mode:"insensitive"}),(a||n)&&(o.createdAt={},a&&(o.createdAt.gte=new Date(a)),n&&(o.createdAt.lte=new Date(n+"T23:59:59")));let p=(await d._.lead.findMany({where:o,orderBy:{createdAt:"desc"},take:1e3})).map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,profession:e.profession,challenge:e.challenge,groupAccepted:e.groupAccepted,diagnosis:e.diagnosis,createdAt:e.createdAt.toISOString()}));return i.NextResponse.json({success:!0,leads:p,count:p.length})}catch(e){return console.error("[Admin Leads] Erro:",e),i.NextResponse.json({error:"Erro ao buscar leads"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/admin/leads/route",pathname:"/api/admin/leads",filename:"route",bundlePath:"app/api/admin/leads/route"},resolvedPagePath:"/Users/leonardocosta/Documents/projetos pessoais/FinanPsi/apps/web/app/api/admin/leads/route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:u,workUnitAsyncStorage:l,serverHooks:m}=c;function g(){return(0,o.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:l})}},5303:()=>{},1326:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});let s=require("@prisma/client"),a=globalThis.prisma??new s.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[267,814],()=>r(3663));module.exports=s})();